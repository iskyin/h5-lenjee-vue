webpackJsonp([0],{8718:function(o,t){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAV1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////+ORg7oAAAAHHRSTlMAihTiOd1dEDUy+veNhl9Z7OaBeGNWGMmSaWhHjIvvHQAAAIRJREFUOMvNkV0OgkAYAz9gVWRRQBT/5v7nNN5gSJaEPk/atI196jpLDhR3h2y4I5Akd5ZcK7ihsN8buuR26UzuB3Jyf+S24H6D7PHA7yz9RsMF8A2jGzxrRVbQnBR5WUMeSqdX2vMFjU9fLDkutvtU248m2738nv3fU5Nh08Np7mNL/QBldQt7GbsIQgAAAABJRU5ErkJggg=="},"9S9j":function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("mvHQ"),s=e.n(n),a=e("G/Ze");var l=e("+aT9"),r=e.n(l),c=(e("n+06"),e("gbGk")),d=void 0,A={name:"Skyin-Search",data:function(){return{isShowMap:!1,content:"",phone:"",wx_addr:"点击选择",user_addr:"",sex:"1",img:[],video:[]}},activated:function(){this.initPage()},methods:{initPage:function(){!function(o,t){console.log("********** 注册 JS-SDK **********");var e=o,n=window.__APPINFO__.host+"/home/auth/get_sign?url="+t;console.log("registJsSdk -> ",n),Object(a.a)(e,n,function(o){console.log("getWxGign -> 返回值 : ",o),0==o.data.code&&window.wx.config({debug:!1,appId:o.data.result.appId,timestamp:o.data.result.timestamp,nonceStr:o.data.result.nonceStr,signature:o.data.result.sign,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onVoiceRecordEnd","playVoice","onVoicePlayEnd","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]})})}(this,window.location.href),this.initAmap()},hideMap:function(){this.isShowMap=!1},showMap:function(){this.isShowMap=!0},openCamera:function(){console.log("*********************************"),console.log("获取图片"),console.log("*********************************");var o=this;if(o.img.length>=4)console.log("最多上传四张");else{var t=c.a.cookie.get("ticket"),e=c.a.cookie.get("openid");window.wx.ready(function(){window.wx.checkJsApi({jsApiList:["getNetworkType","previewImage"],success:function(n){console.log("***** 判断当前版本是否支持指定 JS 接口，支持批量判断 *****"),console.log(s()(n));var i={localId:[],serverId:[]};window.wx.chooseImage({success:function(n){if(console.log("***** 拍照、本地选图 ***** : ",n),i.localId=n.localIds,i.localId.length>4)alert("最多只能选择四张图片");else{var l=0,r=i.localId.length;!function n(){wx.uploadImage({localId:i.localId[l],isShowProgressTips:1,success:function(s){console.log("uploadImage -> 上传返回值: ",s),l++,i.serverId.push(s.serverId);var c=s.localData,d=window.__APPINFO__.host+"/home/tool/upload",A=new FormData;A.append("file",c),A.append("path","img"),A.append("ticket",t),A.append("openid",e),Object(a.c)(o,d,A,function(t){console.log("上传到服务器 -> 返回值 : ",t),0==t.data.code?(console.log("已上传："+l+"/"+r),o.img.push(t.data.result.url)):(console.log("第："+l+"/"+r+"上传失败"),o.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"}))}),l<r&&n()},fail:function(o){alert(s()(o))}})}()}}})}})}),window.wx.error(function(o){console.log("***** JS-SDK 注册失败 *****"),console.log(o)})}},openMedia:function(){console.log("*********************************"),console.log("获取摄像"),console.log("*********************************");var o=this;if(o.img.length>=1)console.log("最多上传1张");else{var t=c.a.cookie.get("ticket"),e=c.a.cookie.get("openid");window.wx.ready(function(){window.wx.checkJsApi({jsApiList:["getNetworkType","previewImage"],success:function(n){console.log("***** 判断当前版本是否支持指定 JS 接口，支持批量判断 *****"),console.log(s()(n));var i={localId:[],serverId:[]};window.wx.chooseImage({success:function(n){if(console.log("***** 拍照、本地选图 *****"),i.localId=n.localIds,i.localId.length>1)alert("最多只能选择1个视频");else{var l=0,r=i.localId.length;!function n(){wx.uploadImage({localId:i.localId[l],isShowProgressTips:1,success:function(s){console.log("uploadImage -> 上传返回值: ",s),l++,i.serverId.push(s.serverId);var c=s.localData,d=window.__APPINFO__.host+"/home/tool/upload",A=new FormData;A.append("file",c),A.append("path","vedio"),A.append("ticket",t),A.append("openid",e),Object(a.c)(o,d,A,function(t){console.log("上传到服务器 -> 返回值 : ",t),0==t.data.code?(console.log("已上传："+l+"/"+r),o.img.push(t.data.result.url)):(console.log("第："+l+"/"+r+"上传失败"),o.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"}))}),l<r&&n()},fail:function(o){alert(s()(o))}})}()}}})}})}),window.wx.error(function(o){console.log("***** JS-SDK 注册失败 *****"),console.log(o)})}},dataValidation:function(){var o={code:!0,msg:"成功"};return""==this.content?(o.code=!1,o.msg="举报内容不能为空",o):"获取地理信息失败"==this.wx_addr||"点击选择"==this.wx_addr?(o.code=!1,o.msg="请选择地理位置",o):0==this.img.length?(o.code=!1,o.msg="请上传图片",o):""==this.phone?(o.code=!1,o.msg="手机号不能为空",o):o},submit:function(){console.log("--------- 提交数据 ----------");var o=this,t=o.dataValidation();if(t.code){var e=c.a.cookie.get("ticket"),n=c.a.cookie.get("openid"),s=o.$route.query.el,i={img_list:this.img.join("|"),desc:this.content,video_list:this.video.join("|"),wx_addr:this.wx_addr,user_addr:this.user_addr,sex:this.sex,phone:this.phone,cname:s,openid:n,ticket:e},l=window.__APPINFO__.host+"/home/cms/add";Object(a.d)(o,l,i,function(t){console.log("表单提交  -> 返回值 : ",t),0==t.data.code?o.$router.push("/sucess"):o.$dialog.confirm({mes:t.data.msg,timeout:1500,icon:"success"})})}else o.$dialog.toast({mes:t.msg,timeout:1500,icon:"error"})},initAmap:function(){console.log("#####################"),console.log("初始化 高德地图  ");var o=void 0,t=void 0,e=this;(d=new r.a.Map("container",{resizeEnable:!0,zoom:15,viewMode:"3D"})).plugin(["AMap.Geolocation"],function(){var o=new r.a.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new r.a.Pixel(10,20),showMarker:!0,showCircle:!0,panToLocation:!0,zoomToAccuracy:!0});d.addControl(o),o.getCurrentPosition(),r.a.event.addListener(o,"complete",function(o){e.wx_addr=o.formattedAddress}),r.a.event.addListener(o,"error",function(o){e.wx_addr="获取地理信息失败",console.log("返回定位出错信息 -> : ",o)})});var n=new r.a.Marker({});d.add(n),d.on("click",function(s){o=s.lnglat.getLng(),t=s.lnglat.getLat(),d.remove(n),n=new r.a.Marker({position:[o,t]}),d.add(n),r.a.service("AMap.Geocoder",function(){var n=new r.a.Geocoder({radius:1e3,extensions:"all"}),s=[o,t];n.getAddress(s,function(o,t){"complete"===o&&"OK"===t.info?(e.wx_addr=t.regeocode.formattedAddress,console.log("地址结果：",t.regeocode.formattedAddress)):(e.wx_addr="获取地理信息失败",console.log("地址结果：",addrDetail))})})}),d.plugin(["AMap.ToolBar","AMap.MapType"],function(){d.addControl(new r.a.ToolBar),d.addControl(new r.a.MapType({showTraffic:!1,showRoad:!1}))})},TextAjax:function(){console.log("TextAjax --\x3e ");var o=c.a.cookie.get("ticket"),t=c.a.cookie.get("openid"),e=this,n=window.__APPINFO__.host+"/home/tool/upload",s=new FormData;s.append("file","xxx.jpg"),s.append("path","vedio"),s.append("ticket",o),s.append("openid",t),Object(a.c)(e,n,s,function(o){console.log("上传到服务器 -> 返回值 : ",o),0==o.data.code?(console.log("已上传："+i+"/"+length),e.img.push(o.data.result.url)):(console.log("第："+i+"/"+length+"上传失败"),e.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"}))})}}},v={render:function(){var o=this,t=o.$createElement,n=o._self._c||t;return n("div",{staticClass:"detail"},[n("div",{staticClass:"frm-list"},[n("yd-cell-group",{attrs:{title:""}},[n("yd-cell-item",[n("yd-textarea",{attrs:{slot:"right",placeholder:"举报内容:",maxlength:"200"},slot:"right",model:{value:o.content,callback:function(t){o.content=t},expression:"content"}})],1)],1)],1),o._v(" "),n("div",{staticClass:"frm-list"},[n("yd-cell-group",[n("yd-cell-item",[n("span",{attrs:{slot:"left"},slot:"left"},[o._v("从地图中选择：")]),o._v(" "),n("span",{attrs:{slot:"right"},slot:"right"},[n("div",{staticClass:"frm-list-right",on:{click:function(t){o.showMap()}}},[n("img",{attrs:{src:e("EoJS"),alt:""}}),o._v(" "),n("div",{staticClass:"frm-addr-txt"},[o._v(o._s(o.wx_addr))])])])])],1)],1),o._v(" "),n("div",{staticClass:"frm-list"},[n("yd-cell-group",[n("yd-cell-item",[n("span",{attrs:{slot:"left"},slot:"left"},[o._v("详细地址：")]),o._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:o.user_addr,expression:"user_addr"}],attrs:{slot:"right",type:"text",placeholder:""},domProps:{value:o.user_addr},on:{input:function(t){t.target.composing||(o.user_addr=t.target.value)}},slot:"right"})])],1)],1),o._v(" "),n("div",{staticClass:"frm-list bottom-line"},[n("div",{staticClass:"frm-list-head"},[n("div",{staticClass:"frm-list-head-l"},[o._v("\n        现场图片：\n      ")]),o._v(" "),n("div",{staticClass:"frm-list-head-r"},[o._v("\n        "+o._s(o.img.length)+"/4\n      ")])]),o._v(" "),n("div",{staticClass:"frm-list-img"},[n("div",{staticClass:"frm-list-img-l",on:{click:function(t){o.openCamera()}}},[n("img",{attrs:{src:e("ijMw"),alt:""}})]),o._v(" "),o._l(o.img,function(o){return n("div",{staticClass:"frm-list-img-l"},[n("img",{attrs:{src:o,alt:""}})])})],2)]),o._v(" "),n("div",{staticClass:"frm-list bottom-line"},[n("div",{staticClass:"frm-list-head"},[n("div",{staticClass:"frm-list-head-l"},[o._v("\n        现场视频：\n      ")]),o._v(" "),n("div",{staticClass:"frm-list-head-r"},[o._v("\n        "+o._s(o.video.length)+"/1\n      ")])]),o._v(" "),n("div",{staticClass:"frm-list-img"},[n("div",{staticClass:"frm-list-img-l",on:{click:function(t){o.openMedia()}}},[n("img",{attrs:{src:e("ig+R"),alt:""}})]),o._v(" "),o._l(o.video,function(o){return n("div",{staticClass:"frm-list-img-l"},[n("img",{attrs:{src:o,alt:""}})])})],2)]),o._v(" "),n("div",{staticClass:"frm-list"},[n("yd-cell-group",[n("yd-cell-item",[n("span",{attrs:{slot:"left"},slot:"left"},[o._v("您的性别：")]),o._v(" "),n("div",{staticClass:"frm-list-rado",attrs:{slot:"right"},slot:"right"},[n("yd-radio-group",{model:{value:o.sex,callback:function(t){o.sex=t},expression:"sex"}},[n("yd-radio",{attrs:{val:"1"}},[o._v("男士")]),o._v(" "),n("yd-radio",{attrs:{val:"2"}},[o._v("女士")])],1)],1)])],1)],1),o._v(" "),n("div",{staticClass:"frm-list"},[n("yd-cell-group",{staticClass:"phoneNum"},[n("yd-cell-item",[n("span",{attrs:{slot:"left"},slot:"left"},[o._v("手机号：")]),o._v(" "),n("yd-input",{attrs:{slot:"right",required:"","show-success-icon":!1,"show-error-icon":!1,regex:"mobile",placeholder:"请输入手机号码"},slot:"right",model:{value:o.phone,callback:function(t){o.phone=t},expression:"phone"}})],1)],1)],1),o._v(" "),n("div",{staticClass:"frm-btn",on:{click:function(t){o.submit()}}},[o._v("\n    提交线索\n  ")]),o._v(" "),o._m(0),o._v(" "),n("div",{staticClass:"frm-btn",on:{click:function(t){o.TextAjax()}}},[o._v("\n    提交线索\n  ")]),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.isShowMap,expression:"isShowMap"}],attrs:{id:"container"}},[n("div",{staticClass:"goback",on:{click:function(t){o.hideMap()}}},[n("img",{attrs:{src:e("8718"),alt:""}}),o._v(" "),n("span",[o._v("确定")])])])])},staticRenderFns:[function(){var o=this.$createElement,t=this._self._c||o;return t("div",{staticClass:"frm-btn"},[t("input",{attrs:{type:"file",name:"",value:""}})])}]};var g=e("VU/8")(A,v,!1,function(o){e("AK5s")},null,null);t.default=g.exports},AK5s:function(o,t){},EoJS:function(o,t){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABmFBMVEUAAAA9n/k1m/s3nPo9n/k9n/olk/gqlvorl/o6nvsgkfgfkfk9n/ogkfk8n/k8n/okkvk8n/k8n/kllPkkk/k7oPomlPk+nvswmfozmvg9n/k9n/k9n/o8n/ojkvk9n/klk/g9n/o9n/knlPg9n/o9nvo8n/kikvklkvoolfk2nfwwmfsumPk2nPw3nPxFpPo3nPkekPczm/kikfk0nPoTi/gplfkZj/g8n/ogkfg9nvo7n/oumP07n/o7nv01nPs9n/hNp/olk/cymvgvmPgajvc9n/kbjvc9n/k9n/o5nvo9n/s8oPk9nvoxmfolkvkjkvg9nvohkvkqlvnF4//D4v/h8f/f8P/d7//K5v/b7v/U6//S6v/H5P+/4P8+oPk8n/nj8//W7P/P6P/J5f+w2f7Z7f/O5/9Tq/qu2P6r1v6OyP1RqfqYzf2CwvxzuvtrtvtbrvpLpvnn9P/R6f/M5v+KxvyEw/x8v/x1u/tvuPtptftXrPpPqPpGpPmk0v2e0P2Uy/1hsvs3nfgsl/i02/6HxPx2vPt70GJzAAAAVHRSTlMA5SwS8sH+UEAmopaDg/fStnlyb2RgVzo2/u/t5+LSyr22squllpKQikUyIx4ZBunl493Z0cvEs398S0Y9Fw0C/PXy7+/v6t7XzcWrno2AfXVrXlw9sGHlAAACmUlEQVQ4y52UZ1/aUBTGbyAMZVOGe+9arXXv7r17b3ZCFkuGgHtrte3XblCKSQD7a59X55z7z0menJOA/9b9kKvf3/y55S9YyH9ysLe7+3P/eG7R2hhzdhVzSYogJILkzo6ef2vE3bvKURRLsbSqMAmGSMeG63OLpwKpMtv5Yip7XPhBJBkl1VyPc8SQhMiN0+ZQi8XheZbnkgkuNVLLrdk3tgRywx65Sa2zmwQkYWut+2HtgOMvndVC1y6FiIsuM/cgBlnIFFy3FYsIk7ScdZjAkSMKKULMoiv1nDOIyJv99GRIyMYfGt7WPgUT6UcmcCYtQzn9Vl+KHDKQVk/GDdz6pKDUdiQhz353GkDrE56GpmecO2cgnyiMGsCJSSEJIXOocz0Wg0nIc6aOYCYuQ7itirfXT2coBGn6ZLzWNUTaZL5W1nJ2k1QhlONm154jDYSISJf6Q05nxNO6l1CQluddNZNBLNJIhs0Us9nUgSDRWkrLKUe9WWtCNCmrvEKxqJxIuWlglrW8PbAsnt5RrwOB5C9X6u6jZlMnxG1X9tHs55TjkI7bIYrzoK5cx5RyS/LSLz9oIP8BpVYbErmpCdBILy620B8ubm+64zdxFSfQNSfzsQi4Qw6RTqCyYabkacRMLLv7xsCnEssitEMWyp9ANGw1U03B7nYcx6IAzB+SNJQyU+XqgrfN527RT6VXfDmwtHaTvNqTpDP7Tav16BAmvq5us+WxL6pbj6dxrnVUd7N3YrgSijag10ope89QcIuVADeC4GO/Mf/grQSrOL4EGsryRlyumhn0dtiCdQYxHu7DvL36g1W3rbMN6+4dGHQHAsFgILAwNNBn62zHbEMWYFZTeNDm6+zA2vE2HOvAfN3vv4yBf9dvc1e1EXdyZT8AAAAASUVORK5CYII="},FeBl:function(o,t){var e=o.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)},"ig+R":function(o,t){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL4AAAC+CAMAAAC8qkWvAAAAM1BMVEX4+Phwu/+z2fyj0vy73fue0P2dz/3C4PvI4/vr8vmGxv6Ryv263Pt4v/9yvP+t1vzM5Po/FCAKAAAA/UlEQVR42u3aOXLDMBBFQYwtgFro5f6ntZ2KlhJUSfqs7gOwXsCAnJkGAAAAAAAAAAAAAADA7iznmnA+tqc61KSlPdGpZn2etg/9bg+y1LTt63O5tAd5q2lru9Lrvd3wgvmHTX1yfq/k/F7J+b2S83sl5/dKzu+VnN8rOb9Xcv6o5PxRyfmjkvNHxeavf/W5+cc2Kjh/+ark/I+Kzi/58uXLly//f/Lly3+d/PAvzvDv/fC/rfB/3fBJww7mPOlTtvQZ529/dn74fD99u5K+20rfLKbvddO36uk3DXEXJWu7Mu7ku6ba0S1b+CVh+h0nAAAAAAAAAAAAAABAih8hXRSXMG5OTwAAAABJRU5ErkJggg=="},ijMw:function(o,t){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL4AAAC+CAMAAAC8qkWvAAAAYFBMVEX4+Phwu/+Cw/6q1fyZzf2/3vuNyP7x9fi32/t+wv6f0P3C4Puu1/z19/h1vf/c6/p6wP+WzP2z2fyl0/zt8/mTy/3X6frM5frn8fmFxf7I4/u83fvQ5/qIxv7h7vnE4fu3KMVyAAACqUlEQVR42u3a186jQAwFYBvC0HuHlPd/yy3CSVYJkNWPiJHOd5ncHI2GGWxDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPBFVWF865VvPJf0czOeY8WkXsnzItIu5SVXUq7nJYZ083hZSJp1vCJRffrUvCYgPZpwdJ6EEa8rQufJGKb0JcOFt2DO9A0Rb8Wj/YW8nZb2ViW8nSymnY3MR17+gLdU0M5yXuPn0RgO4RjlPq+xaWcnXnTxGrqLm+JypPj1mYRozVHiX870TtsfIr4d03tueYD4A80LtcdPGlpyVh4/pbtqiGrTmzxqq6f8quO3JJogYZGVKYlQcXx79im1XZoEauNbNEktFqK/yh2WaY3fyMbhNxLZQK3S+PVyqyeR9Tc646crXUJLTh+V8Xt5Nld7hL7G+FPFeuV53VQla4x/Xa1jJGWjML4/7fxkvaZ1M33xT3IsLplepY2++FMC+5OattQX35Ma+IMOZ6Evfvi6L2ZvNk9f/OE/4of64jufxM/Vrr4nvy8pp3tLX/xSnsol43S16YtfL1WDIlV77mexVCPzLOlO64svxYq9PodoFb7zyOtwtT5WLDXG99dGu3KzxYnG+Pf+mlk+9MlRWW3dyy3X53f6WIotnfH5JrN1i19dKtlcSjsNj4m/+/pvIGtfqW1TcU7C8fmZfyNh9MbngoQ7Gha145KwFfc4mR166G5FWdrF0NGDp7rDLPnneMr7+8vfq9napyu/1Vd6LzUHmG0xJ55Lr6roIINRZt/r6F9dkR1lrvvXKUzloopTJz/YRwF/WCawbTswFuv7piHnLZW0sxN/TuHq27ylkXbW8JY6+oDazR/Q7qqMt2K5tL/O8Dbqir7iFvS+9TP+JRgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHbwC89/I45GZNv9AAAAAElFTkSuQmCC"},mvHQ:function(o,t,e){o.exports={default:e("qkKv"),__esModule:!0}},qkKv:function(o,t,e){var n=e("FeBl"),s=n.JSON||(n.JSON={stringify:JSON.stringify});o.exports=function(o){return s.stringify.apply(s,arguments)}}});