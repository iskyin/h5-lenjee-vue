webpackJsonp([1],{8718:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAV1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////+ORg7oAAAAHHRSTlMAihTiOd1dEDUy+veNhl9Z7OaBeGNWGMmSaWhHjIvvHQAAAIRJREFUOMvNkV0OgkAYAz9gVWRRQBT/5v7nNN5gSJaEPk/atI196jpLDhR3h2y4I5Akd5ZcK7ihsN8buuR26UzuB3Jyf+S24H6D7PHA7yz9RsMF8A2jGzxrRVbQnBR5WUMeSqdX2vMFjU9fLDkutvtU248m2738nv3fU5Nh08Np7mNL/QBldQt7GbsIQgAAAABJRU5ErkJggg=="},"9S9j":function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("mvHQ"),s=t.n(i),n=t("G/Ze");var a=t("+aT9"),l=t.n(a),r=t("n+06"),c=t.n(r),d=t("gbGk"),v={name:"Skyin-Search",data:function(){return{isShowMap:!1,content:"",phone:"",wx_addr:"点击选择",user_addr:"",sex:"1",img:[],video:[]}},activated:function(){this.initPage()},methods:{initPage:function(){this.initAmap()},hideMap:function(){this.isShowMap=!1},showMap:function(){this.isShowMap=!0},openCamera:function(){console.log("*********************************"),console.log("获取图片"),console.log("*********************************");var o=this;if(o.img.length>=4)console.log("最多上传四张");else{var e=d.a.cookie.get("ticket"),t=d.a.cookie.get("openid");window.wx.ready(function(){window.wx.checkJsApi({jsApiList:["getNetworkType","previewImage"],success:function(i){console.log("***** 判断当前版本是否支持指定 JS 接口，支持批量判断 *****"),console.log(s()(i));var a={localId:[],serverId:[]};window.wx.chooseImage({success:function(i){if(console.log("***** 拍照、本地选图 ***** : ",i),a.localId=i.localIds,a.localId.length>4)alert("最多只能选择四张图片");else{var l=0,r=a.localId.length;!function i(){wx.uploadImage({localId:a.localId[l],isShowProgressTips:1,success:function(s){console.log("uploadImage -> 上传返回值: ",s),l++,a.serverId.push(s.serverId);var c=s.localData,d=window.__APPINFO__.host+"/home/tool/upload",v=new FormData;v.append("file",c),v.append("path","img"),v.append("ticket",e),v.append("openid",t),Object(n.c)(o,d,v,function(e){console.log("上传到服务器 -> 返回值 : ",e),0==e.data.code?(console.log("已上传："+l+"/"+r),o.img.push(e.data.result.url)):(console.log("第："+l+"/"+r+"上传失败"),o.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"}))}),l<r&&i()},fail:function(o){alert(s()(o))}})}()}}})}})}),window.wx.error(function(o){console.log("***** JS-SDK 注册失败 *****"),console.log(o)})}},openMedia:function(){console.log("*********************************"),console.log("获取摄像"),console.log("*********************************");var o=this;if(o.img.length>=1)console.log("最多上传1张");else{var e=d.a.cookie.get("ticket"),t=d.a.cookie.get("openid");window.wx.ready(function(){window.wx.checkJsApi({jsApiList:["getNetworkType","previewImage"],success:function(i){console.log("***** 判断当前版本是否支持指定 JS 接口，支持批量判断 *****"),console.log(s()(i));var a={localId:[],serverId:[]};window.wx.chooseImage({success:function(i){if(console.log("***** 拍照、本地选图 *****"),a.localId=i.localIds,a.localId.length>1)alert("最多只能选择1个视频");else{var l=0,r=a.localId.length;!function i(){wx.uploadImage({localId:a.localId[l],isShowProgressTips:1,success:function(s){console.log("uploadImage -> 上传返回值: ",s),l++,a.serverId.push(s.serverId);var c=s.localData,d=window.__APPINFO__.host+"/home/tool/upload",v=new FormData;v.append("file",c),v.append("path","vedio"),v.append("ticket",e),v.append("openid",t),Object(n.c)(o,d,v,function(e){console.log("上传到服务器 -> 返回值 : ",e),0==e.data.code?(console.log("已上传："+l+"/"+r),o.img.push(e.data.result.url)):(console.log("第："+l+"/"+r+"上传失败"),o.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"}))}),l<r&&i()},fail:function(o){alert(s()(o))}})}()}}})}})}),window.wx.error(function(o){console.log("***** JS-SDK 注册失败 *****"),console.log(o)})}},dataValidation:function(){var o={code:!0,msg:"成功"};return""==this.content?(o.code=!1,o.msg="举报内容不能为空",o):"获取地理信息失败"==this.wx_addr||"点击选择"==this.wx_addr?(o.code=!1,o.msg="请选择地理位置",o):0==this.img.length?(o.code=!1,o.msg="请上传图片",o):""==this.phone?(o.code=!1,o.msg="手机号不能为空",o):o},submit:function(){console.log("--------- 提交数据 ----------");var o=this,e=o.dataValidation();if(e.code){var t=d.a.cookie.get("ticket"),i=d.a.cookie.get("openid"),s=o.$route.query.el,a={img_list:this.img.join("|"),desc:this.content,video_list:this.video.join("|"),wx_addr:this.wx_addr,user_addr:this.user_addr,sex:this.sex,phone:this.phone,cname:s,openid:i,ticket:t},l=window.__APPINFO__.host+"/home/cms/add";Object(n.d)(o,l,a,function(e){console.log("表单提交  -> 返回值 : ",e),0==e.data.code?o.$router.push("/sucess"):o.$dialog.confirm({mes:e.data.msg,timeout:1500,icon:"success"})})}else o.$dialog.toast({mes:e.msg,timeout:1500,icon:"error"})},initAmap:function(){console.log("#####################"),console.log("初始化 高德地图  "),console.log("******** 由于Chrome、IOS10等已不再支持非安全域的浏览器定位请求，为保证定位成功率和精度，请尽快升级您的站点到HTTPS。******");var o=void 0,e=void 0,t=void 0,i="",s=void 0,n=void 0,a=this;(o=new l.a.Map("container",{resizeEnable:!0,zoom:16})).plugin(["AMap.Geolocation"],function(){e=new l.a.Geolocation({enableHighAccuracy:!0,timeout:5e3,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new l.a.Pixel(10,20),showMarker:!0,showCircle:!0,panToLocation:!0,zoomToAccuracy:!0}),o.addControl(e),e.getCurrentPosition(),l.a.event.addListener(e,"complete",function(o){a.wx_addr=o.formattedAddress}),l.a.event.addListener(e,"error",function(o){a.wx_addr="获取地理信息失败",console.log("返回定位出错信息 -> : ",o)})}),t=new l.a.Marker,o.add(t),o.on("click",function(e){s=e.lnglat.getLng(),n=e.lnglat.getLat(),o.remove(t),t=new l.a.Marker({position:[s,n]}),o.add(t),l.a.service("AMap.Geocoder",function(){var e=new l.a.Geocoder({radius:1e3,extensions:"all"}),t=[s,n];e.getAddress(t,function(e,t){console.log("地址结果： status: ",e," result: ",t),"complete"===e&&"OK"===t.info?(i=t.regeocode.formattedAddress,a.wx_addr=t.regeocode.formattedAddress,c.a.loadUI(["misc/PoiPicker"],function(e){var s=new e({input:"searchInput",placeSearchOptions:{map:o,pageSize:4},searchResultsContainer:"searchResults"});s.on("poiPicked",function(o){s.hideSearchResults();var e=o.source,i=o.item;if("search"!==e)s.searchByKeyword(i.name);else{var n=t.regeocode.formattedAddress+"-"+i.name;console.log("poi: ",n),a.wx_addr=n}}),s.onCityReady(function(){s.searchByKeyword(i)})})):a.wx_addr="获取地理信息失败"})})}),o.plugin(["AMap.ToolBar","AMap.MapType"],function(){o.addControl(new l.a.ToolBar),o.addControl(new l.a.MapType({showTraffic:!1,showRoad:!1}))})},uploadFile:function(o){console.log("### uploadFile --\x3e : ",o);var e=this,t=void 0,i=d.a.cookie.get("ticket"),s=d.a.cookie.get("openid");if("img"==o){if(e.img.length>=4)return void e.$dialog.alert({mes:"最多上传四张"});t=e.$refs.imgFile.files[0]}if("video"==o){if(e.video.length>=1)return void e.$dialog.alert({mes:"最多上传一个视频"});t=e.$refs.videoFile.files[0]}console.log("input.file.files : ",t);var a=window.__APPINFO__.host+"/home/tool/upload",l=new FormData;l.append("file",t),l.append("path",o),l.append("ticket",i),l.append("openid",s),Object(n.c)(e,a,l,function(t){if(console.log("上传到服务器 -> 返回值 : ",t),0==t.data.code){var i=window.__APPINFO__.host+t.data.result.url;"img"==o&&e.img.push(i),"video"==o&&e.video.push(i),console.log("***** img: ",e.img),console.log("***** video: ",e.video)}else e.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"})})}}},g={render:function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"detail"},[i("div",{staticClass:"frm-list"},[i("yd-cell-group",{attrs:{title:""}},[i("yd-cell-item",[i("yd-textarea",{attrs:{slot:"right",placeholder:"举报内容:",maxlength:"200"},slot:"right",model:{value:o.content,callback:function(e){o.content=e},expression:"content"}})],1)],1)],1),o._v(" "),i("div",{staticClass:"frm-list"},[i("yd-cell-group",[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[o._v("从地图中选择：")]),o._v(" "),i("span",{attrs:{slot:"right"},slot:"right"},[i("div",{staticClass:"frm-list-right",on:{click:function(e){o.showMap()}}},[i("img",{attrs:{src:t("EoJS"),alt:""}}),o._v(" "),i("div",{staticClass:"frm-addr-txt"},[o._v(o._s(o.wx_addr))])])])])],1)],1),o._v(" "),i("div",{staticClass:"frm-list"},[i("yd-cell-group",[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[o._v("详细地址：")]),o._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:o.user_addr,expression:"user_addr"}],attrs:{slot:"right",type:"text",placeholder:""},domProps:{value:o.user_addr},on:{input:function(e){e.target.composing||(o.user_addr=e.target.value)}},slot:"right"})])],1)],1),o._v(" "),i("div",{staticClass:"frm-list bottom-line"},[i("div",{staticClass:"frm-list-head"},[i("div",{staticClass:"frm-list-head-l"},[o._v("\n        现场图片：\n      ")]),o._v(" "),i("div",{staticClass:"frm-list-head-r"},[o._v("\n        "+o._s(o.img.length)+"/4\n      ")])]),o._v(" "),i("div",{staticClass:"frm-list-img"},[i("div",{staticClass:"frm-list-img-l"},[i("input",{ref:"imgFile",staticClass:"input_file",attrs:{type:"file",name:"",value:""},on:{change:function(e){o.uploadFile("img")}}})]),o._v(" "),o._l(o.img,function(o){return i("div",{staticClass:"frm-list-img-l"},[i("img",{attrs:{src:o,alt:""}})])})],2)]),o._v(" "),i("div",{staticClass:"frm-list bottom-line"},[i("div",{staticClass:"frm-list-head"},[i("div",{staticClass:"frm-list-head-l"},[o._v("\n        现场视频：\n      ")]),o._v(" "),i("div",{staticClass:"frm-list-head-r"},[o._v("\n        "+o._s(o.video.length)+"/1\n      ")])]),o._v(" "),i("div",{staticClass:"frm-list-img"},[i("div",{staticClass:"frm-list-img-v"},[i("input",{ref:"videoFile",staticClass:"input_file",attrs:{type:"file",name:"",value:""},on:{change:function(e){o.uploadFile("video")}}})]),o._v(" "),o._l(o.video,function(o){return i("div",{staticClass:"frm-list-img-l"},[i("img",{attrs:{src:o,alt:""}})])})],2)]),o._v(" "),i("div",{staticClass:"frm-list"},[i("yd-cell-group",[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[o._v("您的性别：")]),o._v(" "),i("div",{staticClass:"frm-list-rado",attrs:{slot:"right"},slot:"right"},[i("yd-radio-group",{model:{value:o.sex,callback:function(e){o.sex=e},expression:"sex"}},[i("yd-radio",{attrs:{val:"1"}},[o._v("男士")]),o._v(" "),i("yd-radio",{attrs:{val:"2"}},[o._v("女士")])],1)],1)])],1)],1),o._v(" "),i("div",{staticClass:"frm-list"},[i("yd-cell-group",{staticClass:"phoneNum"},[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[o._v("手机号：")]),o._v(" "),i("yd-input",{attrs:{slot:"right",required:"","show-success-icon":!1,"show-error-icon":!1,regex:"mobile",placeholder:"请输入手机号码"},slot:"right",model:{value:o.phone,callback:function(e){o.phone=e},expression:"phone"}})],1)],1)],1),o._v(" "),i("div",{staticClass:"frm-btn",on:{click:function(e){o.submit()}}},[o._v("\n    提交线索\n  ")]),o._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:o.isShowMap,expression:"isShowMap"}],attrs:{id:"outer-box"}},[i("div",{staticClass:"goback",on:{click:function(e){o.hideMap()}}},[i("img",{attrs:{src:t("8718"),alt:""}}),o._v(" "),i("span",[o._v("确定")])]),o._v(" "),i("div",{attrs:{id:"container"}}),o._v(" "),o._m(0)])])},staticRenderFns:[function(){var o=this.$createElement,e=this._self._c||o;return e("div",{staticClass:"scrollbar1",attrs:{id:"panel"}},[e("div",{attrs:{id:"searchBar"}},[e("input",{attrs:{id:"searchInput",placeholder:"输入关键字搜素POI"}})]),this._v(" "),e("div",{attrs:{id:"searchResults"}})])}]};var u=t("VU/8")(v,g,!1,function(o){t("Evmi")},null,null);e.default=u.exports},EoJS:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABmFBMVEUAAAA9n/k1m/s3nPo9n/k9n/olk/gqlvorl/o6nvsgkfgfkfk9n/ogkfk8n/k8n/okkvk8n/k8n/kllPkkk/k7oPomlPk+nvswmfozmvg9n/k9n/k9n/o8n/ojkvk9n/klk/g9n/o9n/knlPg9n/o9nvo8n/kikvklkvoolfk2nfwwmfsumPk2nPw3nPxFpPo3nPkekPczm/kikfk0nPoTi/gplfkZj/g8n/ogkfg9nvo7n/oumP07n/o7nv01nPs9n/hNp/olk/cymvgvmPgajvc9n/kbjvc9n/k9n/o5nvo9n/s8oPk9nvoxmfolkvkjkvg9nvohkvkqlvnF4//D4v/h8f/f8P/d7//K5v/b7v/U6//S6v/H5P+/4P8+oPk8n/nj8//W7P/P6P/J5f+w2f7Z7f/O5/9Tq/qu2P6r1v6OyP1RqfqYzf2CwvxzuvtrtvtbrvpLpvnn9P/R6f/M5v+KxvyEw/x8v/x1u/tvuPtptftXrPpPqPpGpPmk0v2e0P2Uy/1hsvs3nfgsl/i02/6HxPx2vPt70GJzAAAAVHRSTlMA5SwS8sH+UEAmopaDg/fStnlyb2RgVzo2/u/t5+LSyr22squllpKQikUyIx4ZBunl493Z0cvEs398S0Y9Fw0C/PXy7+/v6t7XzcWrno2AfXVrXlw9sGHlAAACmUlEQVQ4y52UZ1/aUBTGbyAMZVOGe+9arXXv7r17b3ZCFkuGgHtrte3XblCKSQD7a59X55z7z0menJOA/9b9kKvf3/y55S9YyH9ysLe7+3P/eG7R2hhzdhVzSYogJILkzo6ef2vE3bvKURRLsbSqMAmGSMeG63OLpwKpMtv5Yip7XPhBJBkl1VyPc8SQhMiN0+ZQi8XheZbnkgkuNVLLrdk3tgRywx65Sa2zmwQkYWut+2HtgOMvndVC1y6FiIsuM/cgBlnIFFy3FYsIk7ScdZjAkSMKKULMoiv1nDOIyJv99GRIyMYfGt7WPgUT6UcmcCYtQzn9Vl+KHDKQVk/GDdz6pKDUdiQhz353GkDrE56GpmecO2cgnyiMGsCJSSEJIXOocz0Wg0nIc6aOYCYuQ7itirfXT2coBGn6ZLzWNUTaZL5W1nJ2k1QhlONm154jDYSISJf6Q05nxNO6l1CQluddNZNBLNJIhs0Us9nUgSDRWkrLKUe9WWtCNCmrvEKxqJxIuWlglrW8PbAsnt5RrwOB5C9X6u6jZlMnxG1X9tHs55TjkI7bIYrzoK5cx5RyS/LSLz9oIP8BpVYbErmpCdBILy620B8ubm+64zdxFSfQNSfzsQi4Qw6RTqCyYabkacRMLLv7xsCnEssitEMWyp9ANGw1U03B7nYcx6IAzB+SNJQyU+XqgrfN527RT6VXfDmwtHaTvNqTpDP7Tav16BAmvq5us+WxL6pbj6dxrnVUd7N3YrgSijag10ope89QcIuVADeC4GO/Mf/grQSrOL4EGsryRlyumhn0dtiCdQYxHu7DvL36g1W3rbMN6+4dGHQHAsFgILAwNNBn62zHbEMWYFZTeNDm6+zA2vE2HOvAfN3vv4yBf9dvc1e1EXdyZT8AAAAASUVORK5CYII="},Evmi:function(o,e){}});
//# sourceMappingURL=1.c26e95487e532d577986.js.map