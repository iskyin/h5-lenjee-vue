webpackJsonp([1],{8718:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAV1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////+ORg7oAAAAHHRSTlMAihTiOd1dEDUy+veNhl9Z7OaBeGNWGMmSaWhHjIvvHQAAAIRJREFUOMvNkV0OgkAYAz9gVWRRQBT/5v7nNN5gSJaEPk/atI196jpLDhR3h2y4I5Akd5ZcK7ihsN8buuR26UzuB3Jyf+S24H6D7PHA7yz9RsMF8A2jGzxrRVbQnBR5WUMeSqdX2vMFjU9fLDkutvtU248m2738nv3fU5Nh08Np7mNL/QBldQt7GbsIQgAAAABJRU5ErkJggg=="},"9S9j":function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("mvHQ"),s=t.n(i),n=t("G/Ze");var l=t("+aT9"),a=t.n(l),r=(t("n+06"),t("gbGk")),c=void 0,d={name:"Skyin-Search",data:function(){return{isShowMap:!1,content:"",phone:"",wx_addr:"点击选择",user_addr:"",sex:"1",img:[],video:[]}},activated:function(){this.initPage()},methods:{initPage:function(){this.initAmap()},hideMap:function(){this.isShowMap=!1},showMap:function(){this.isShowMap=!0},openCamera:function(){console.log("*********************************"),console.log("获取图片"),console.log("*********************************");var o=this;if(o.img.length>=4)console.log("最多上传四张");else{var e=r.a.cookie.get("ticket"),t=r.a.cookie.get("openid");window.wx.ready(function(){window.wx.checkJsApi({jsApiList:["getNetworkType","previewImage"],success:function(i){console.log("***** 判断当前版本是否支持指定 JS 接口，支持批量判断 *****"),console.log(s()(i));var l={localId:[],serverId:[]};window.wx.chooseImage({success:function(i){if(console.log("***** 拍照、本地选图 ***** : ",i),l.localId=i.localIds,l.localId.length>4)alert("最多只能选择四张图片");else{var a=0,r=l.localId.length;!function i(){wx.uploadImage({localId:l.localId[a],isShowProgressTips:1,success:function(s){console.log("uploadImage -> 上传返回值: ",s),a++,l.serverId.push(s.serverId);var c=s.localData,d=window.__APPINFO__.host+"/home/tool/upload",g=new FormData;g.append("file",c),g.append("path","img"),g.append("ticket",e),g.append("openid",t),Object(n.c)(o,d,g,function(e){console.log("上传到服务器 -> 返回值 : ",e),0==e.data.code?(console.log("已上传："+a+"/"+r),o.img.push(e.data.result.url)):(console.log("第："+a+"/"+r+"上传失败"),o.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"}))}),a<r&&i()},fail:function(o){alert(s()(o))}})}()}}})}})}),window.wx.error(function(o){console.log("***** JS-SDK 注册失败 *****"),console.log(o)})}},openMedia:function(){console.log("*********************************"),console.log("获取摄像"),console.log("*********************************");var o=this;if(o.img.length>=1)console.log("最多上传1张");else{var e=r.a.cookie.get("ticket"),t=r.a.cookie.get("openid");window.wx.ready(function(){window.wx.checkJsApi({jsApiList:["getNetworkType","previewImage"],success:function(i){console.log("***** 判断当前版本是否支持指定 JS 接口，支持批量判断 *****"),console.log(s()(i));var l={localId:[],serverId:[]};window.wx.chooseImage({success:function(i){if(console.log("***** 拍照、本地选图 *****"),l.localId=i.localIds,l.localId.length>1)alert("最多只能选择1个视频");else{var a=0,r=l.localId.length;!function i(){wx.uploadImage({localId:l.localId[a],isShowProgressTips:1,success:function(s){console.log("uploadImage -> 上传返回值: ",s),a++,l.serverId.push(s.serverId);var c=s.localData,d=window.__APPINFO__.host+"/home/tool/upload",g=new FormData;g.append("file",c),g.append("path","vedio"),g.append("ticket",e),g.append("openid",t),Object(n.c)(o,d,g,function(e){console.log("上传到服务器 -> 返回值 : ",e),0==e.data.code?(console.log("已上传："+a+"/"+r),o.img.push(e.data.result.url)):(console.log("第："+a+"/"+r+"上传失败"),o.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"}))}),a<r&&i()},fail:function(o){alert(s()(o))}})}()}}})}})}),window.wx.error(function(o){console.log("***** JS-SDK 注册失败 *****"),console.log(o)})}},dataValidation:function(){var o={code:!0,msg:"成功"};return""==this.content?(o.code=!1,o.msg="举报内容不能为空",o):"获取地理信息失败"==this.wx_addr||"点击选择"==this.wx_addr?(o.code=!1,o.msg="请选择地理位置",o):0==this.img.length?(o.code=!1,o.msg="请上传图片",o):""==this.phone?(o.code=!1,o.msg="手机号不能为空",o):o},submit:function(){console.log("--------- 提交数据 ----------");var o=this,e=o.dataValidation();if(e.code){var t=r.a.cookie.get("ticket"),i=r.a.cookie.get("openid"),s=o.$route.query.el,l={img_list:this.img.join("|"),desc:this.content,video_list:this.video.join("|"),wx_addr:this.wx_addr,user_addr:this.user_addr,sex:this.sex,phone:this.phone,cname:s,openid:i,ticket:t},a=window.__APPINFO__.host+"/home/cms/add";Object(n.d)(o,a,l,function(e){console.log("表单提交  -> 返回值 : ",e),0==e.data.code?o.$router.push("/sucess"):o.$dialog.confirm({mes:e.data.msg,timeout:1500,icon:"success"})})}else o.$dialog.toast({mes:e.msg,timeout:1500,icon:"error"})},initAmap:function(){console.log("#####################"),console.log("初始化 高德地图  ");var o=void 0,e=void 0,t=this;(c=new a.a.Map("container",{resizeEnable:!0,zoom:15,viewMode:"3D"})).plugin(["AMap.Geolocation"],function(){var o=new a.a.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new a.a.Pixel(10,20),showMarker:!0,showCircle:!0,panToLocation:!0,zoomToAccuracy:!0});c.addControl(o),o.getCurrentPosition(),a.a.event.addListener(o,"complete",function(o){t.wx_addr=o.formattedAddress}),a.a.event.addListener(o,"error",function(o){t.wx_addr="获取地理信息失败",console.log("返回定位出错信息 -> : ",o)})});var i=new a.a.Marker({});c.add(i),c.on("click",function(s){o=s.lnglat.getLng(),e=s.lnglat.getLat(),c.remove(i),i=new a.a.Marker({position:[o,e]}),c.add(i),a.a.service("AMap.Geocoder",function(){var i=new a.a.Geocoder({radius:1e3,extensions:"all"}),s=[o,e];i.getAddress(s,function(o,e){"complete"===o&&"OK"===e.info?(t.wx_addr=e.regeocode.formattedAddress,console.log("地址结果：",e.regeocode.formattedAddress)):(t.wx_addr="获取地理信息失败",console.log("地址结果：",addrDetail))})})}),c.plugin(["AMap.ToolBar","AMap.MapType"],function(){c.addControl(new a.a.ToolBar),c.addControl(new a.a.MapType({showTraffic:!1,showRoad:!1}))})},uploadFile:function(o){console.log("### uploadFile --\x3e : ",o);var e=this,t=void 0,i=r.a.cookie.get("ticket"),s=r.a.cookie.get("openid");if("img"==o){if(e.img.length>=4)return void e.$dialog.alert({mes:"最多上传四张"});t=e.$refs.imgFile.files[0]}if("video"==o){if(e.video.length>=1)return void e.$dialog.alert({mes:"最多上传一个视频"});t=e.$refs.videoFile.files[0]}console.log("input.file.files : ",t);var l=window.__APPINFO__.host+"/home/tool/upload",a=new FormData;a.append("file",t),a.append("path",o),a.append("ticket",i),a.append("openid",s),Object(n.c)(e,l,a,function(t){if(console.log("上传到服务器 -> 返回值 : ",t),0==t.data.code){var i=window.__APPINFO__.host+t.data.result.url;"img"==o&&e.img.push(i),"video"==o&&e.video.push(i),console.log("***** img: ",e.img),console.log("***** video: ",e.video)}else e.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"})})}}},g={render:function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"detail"},[i("div",{staticClass:"frm-list"},[i("yd-cell-group",{attrs:{title:""}},[i("yd-cell-item",[i("yd-textarea",{attrs:{slot:"right",placeholder:"举报内容:",maxlength:"200"},slot:"right",model:{value:o.content,callback:function(e){o.content=e},expression:"content"}})],1)],1)],1),o._v(" "),i("div",{staticClass:"frm-list"},[i("yd-cell-group",[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[o._v("从地图中选择：")]),o._v(" "),i("span",{attrs:{slot:"right"},slot:"right"},[i("div",{staticClass:"frm-list-right",on:{click:function(e){o.showMap()}}},[i("img",{attrs:{src:t("EoJS"),alt:""}}),o._v(" "),i("div",{staticClass:"frm-addr-txt"},[o._v(o._s(o.wx_addr))])])])])],1)],1),o._v(" "),i("div",{staticClass:"frm-list"},[i("yd-cell-group",[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[o._v("详细地址：")]),o._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:o.user_addr,expression:"user_addr"}],attrs:{slot:"right",type:"text",placeholder:""},domProps:{value:o.user_addr},on:{input:function(e){e.target.composing||(o.user_addr=e.target.value)}},slot:"right"})])],1)],1),o._v(" "),i("div",{staticClass:"frm-list bottom-line"},[i("div",{staticClass:"frm-list-head"},[i("div",{staticClass:"frm-list-head-l"},[o._v("\n        现场图片：\n      ")]),o._v(" "),i("div",{staticClass:"frm-list-head-r"},[o._v("\n        "+o._s(o.img.length)+"/4\n      ")])]),o._v(" "),i("div",{staticClass:"frm-list-img"},[i("div",{staticClass:"frm-list-img-l"},[i("input",{ref:"imgFile",staticClass:"input_file",attrs:{type:"file",name:"",value:""},on:{change:function(e){o.uploadFile("img")}}})]),o._v(" "),o._l(o.img,function(o){return i("div",{staticClass:"frm-list-img-l"},[i("img",{attrs:{src:o,alt:""}})])})],2)]),o._v(" "),i("div",{staticClass:"frm-list bottom-line"},[i("div",{staticClass:"frm-list-head"},[i("div",{staticClass:"frm-list-head-l"},[o._v("\n        现场视频：\n      ")]),o._v(" "),i("div",{staticClass:"frm-list-head-r"},[o._v("\n        "+o._s(o.video.length)+"/1\n      ")])]),o._v(" "),i("div",{staticClass:"frm-list-img"},[i("div",{staticClass:"frm-list-img-v"},[i("input",{ref:"videoFile",staticClass:"input_file",attrs:{type:"file",name:"",value:""},on:{change:function(e){o.uploadFile("video")}}})]),o._v(" "),o._l(o.video,function(o){return i("div",{staticClass:"frm-list-img-l"},[i("img",{attrs:{src:o,alt:""}})])})],2)]),o._v(" "),i("div",{staticClass:"frm-list"},[i("yd-cell-group",[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[o._v("您的性别：")]),o._v(" "),i("div",{staticClass:"frm-list-rado",attrs:{slot:"right"},slot:"right"},[i("yd-radio-group",{model:{value:o.sex,callback:function(e){o.sex=e},expression:"sex"}},[i("yd-radio",{attrs:{val:"1"}},[o._v("男士")]),o._v(" "),i("yd-radio",{attrs:{val:"2"}},[o._v("女士")])],1)],1)])],1)],1),o._v(" "),i("div",{staticClass:"frm-list"},[i("yd-cell-group",{staticClass:"phoneNum"},[i("yd-cell-item",[i("span",{attrs:{slot:"left"},slot:"left"},[o._v("手机号：")]),o._v(" "),i("yd-input",{attrs:{slot:"right",required:"","show-success-icon":!1,"show-error-icon":!1,regex:"mobile",placeholder:"请输入手机号码"},slot:"right",model:{value:o.phone,callback:function(e){o.phone=e},expression:"phone"}})],1)],1)],1),o._v(" "),i("div",{staticClass:"frm-btn",on:{click:function(e){o.submit()}}},[o._v("\n    提交线索\n  ")]),o._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:o.isShowMap,expression:"isShowMap"}],attrs:{id:"container"}},[i("div",{staticClass:"goback",on:{click:function(e){o.hideMap()}}},[i("img",{attrs:{src:t("8718"),alt:""}}),o._v(" "),i("span",[o._v("确定")])])])])},staticRenderFns:[]};var v=t("VU/8")(d,g,!1,function(o){t("RDBG")},null,null);e.default=v.exports},EoJS:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABmFBMVEUAAAA9n/k1m/s3nPo9n/k9n/olk/gqlvorl/o6nvsgkfgfkfk9n/ogkfk8n/k8n/okkvk8n/k8n/kllPkkk/k7oPomlPk+nvswmfozmvg9n/k9n/k9n/o8n/ojkvk9n/klk/g9n/o9n/knlPg9n/o9nvo8n/kikvklkvoolfk2nfwwmfsumPk2nPw3nPxFpPo3nPkekPczm/kikfk0nPoTi/gplfkZj/g8n/ogkfg9nvo7n/oumP07n/o7nv01nPs9n/hNp/olk/cymvgvmPgajvc9n/kbjvc9n/k9n/o5nvo9n/s8oPk9nvoxmfolkvkjkvg9nvohkvkqlvnF4//D4v/h8f/f8P/d7//K5v/b7v/U6//S6v/H5P+/4P8+oPk8n/nj8//W7P/P6P/J5f+w2f7Z7f/O5/9Tq/qu2P6r1v6OyP1RqfqYzf2CwvxzuvtrtvtbrvpLpvnn9P/R6f/M5v+KxvyEw/x8v/x1u/tvuPtptftXrPpPqPpGpPmk0v2e0P2Uy/1hsvs3nfgsl/i02/6HxPx2vPt70GJzAAAAVHRSTlMA5SwS8sH+UEAmopaDg/fStnlyb2RgVzo2/u/t5+LSyr22squllpKQikUyIx4ZBunl493Z0cvEs398S0Y9Fw0C/PXy7+/v6t7XzcWrno2AfXVrXlw9sGHlAAACmUlEQVQ4y52UZ1/aUBTGbyAMZVOGe+9arXXv7r17b3ZCFkuGgHtrte3XblCKSQD7a59X55z7z0menJOA/9b9kKvf3/y55S9YyH9ysLe7+3P/eG7R2hhzdhVzSYogJILkzo6ef2vE3bvKURRLsbSqMAmGSMeG63OLpwKpMtv5Yip7XPhBJBkl1VyPc8SQhMiN0+ZQi8XheZbnkgkuNVLLrdk3tgRywx65Sa2zmwQkYWut+2HtgOMvndVC1y6FiIsuM/cgBlnIFFy3FYsIk7ScdZjAkSMKKULMoiv1nDOIyJv99GRIyMYfGt7WPgUT6UcmcCYtQzn9Vl+KHDKQVk/GDdz6pKDUdiQhz353GkDrE56GpmecO2cgnyiMGsCJSSEJIXOocz0Wg0nIc6aOYCYuQ7itirfXT2coBGn6ZLzWNUTaZL5W1nJ2k1QhlONm154jDYSISJf6Q05nxNO6l1CQluddNZNBLNJIhs0Us9nUgSDRWkrLKUe9WWtCNCmrvEKxqJxIuWlglrW8PbAsnt5RrwOB5C9X6u6jZlMnxG1X9tHs55TjkI7bIYrzoK5cx5RyS/LSLz9oIP8BpVYbErmpCdBILy620B8ubm+64zdxFSfQNSfzsQi4Qw6RTqCyYabkacRMLLv7xsCnEssitEMWyp9ANGw1U03B7nYcx6IAzB+SNJQyU+XqgrfN527RT6VXfDmwtHaTvNqTpDP7Tav16BAmvq5us+WxL6pbj6dxrnVUd7N3YrgSijag10ope89QcIuVADeC4GO/Mf/grQSrOL4EGsryRlyumhn0dtiCdQYxHu7DvL36g1W3rbMN6+4dGHQHAsFgILAwNNBn62zHbEMWYFZTeNDm6+zA2vE2HOvAfN3vv4yBf9dvc1e1EXdyZT8AAAAASUVORK5CYII="},RDBG:function(o,e){}});
//# sourceMappingURL=1.27b4e74ee84766915b13.js.map