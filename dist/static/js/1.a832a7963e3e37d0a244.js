webpackJsonp([1],{8718:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAV1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////+ORg7oAAAAHHRSTlMAihTiOd1dEDUy+veNhl9Z7OaBeGNWGMmSaWhHjIvvHQAAAIRJREFUOMvNkV0OgkAYAz9gVWRRQBT/5v7nNN5gSJaEPk/atI196jpLDhR3h2y4I5Akd5ZcK7ihsN8buuR26UzuB3Jyf+S24H6D7PHA7yz9RsMF8A2jGzxrRVbQnBR5WUMeSqdX2vMFjU9fLDkutvtU248m2738nv3fU5Nh08Np7mNL/QBldQt7GbsIQgAAAABJRU5ErkJggg=="},"9S9j":function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("mvHQ"),i=t.n(s),n=t("G/Ze");var a=t("+aT9"),l=t.n(a),c=t("n+06"),r=t.n(c),d=t("gbGk"),g=void 0,u=void 0,v=void 0,p={name:"Skyin-Search",data:function(){return{isShowMap:!1,content:"",phone:"",wx_addr:"点击选择",user_addr:"",sex:"1",img:[],video:[]}},activated:function(){this.initPage()},methods:{initPage:function(){v=this,function(o,e,t){console.log("********** 注册 JS-SDK **********");var s=o,i=window.__APPINFO__.host+"/home/auth/get_sign?url="+e;console.log("registJsSdk -> ",i),Object(n.a)(s,i,function(o){console.log("getWxGign -> 返回值 : ",o),0==o.data.code&&(window.wx.config({debug:!1,appId:o.data.result.appId,timestamp:o.data.result.timestamp,nonceStr:o.data.result.nonceStr,signature:o.data.result.sign,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onVoiceRecordEnd","playVoice","onVoicePlayEnd","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]}),t())})}(this,window.location.href,function(){console.log("##### 微信初始化jssdk成功 calllback #####"),v.initAmap()})},hideMap:function(){this.isShowMap=!1},showMap:function(){this.isShowMap=!0},initWehatMap:function(){console.log("*********************************"),console.log("微信 初始化 地理位置"),console.log("*********************************"),window.wx.ready(function(){window.wx.checkJsApi({jsApiList:["getNetworkType","previewImage"],success:function(o){console.log("***** 判断当前版本是否支持指定 JS 接口，支持批量判断 *****");var e=i()(o);console.log(e),v.setAddr(e.longitude,e.latitude)}})}),window.wx.error(function(o){console.log("***** JS-SDK 注册失败 *****"),console.log(o),v.wx_addr="获取地理信息失败"})},openCamera:function(){if(console.log("*********************************"),console.log("获取图片"),console.log("*********************************"),v.img.length>=4)console.log("最多上传四张");else{var o=d.a.cookie.get("ticket"),e=d.a.cookie.get("openid");window.wx.ready(function(){window.wx.checkJsApi({jsApiList:["getNetworkType","previewImage"],success:function(t){console.log("***** 判断当前版本是否支持指定 JS 接口，支持批量判断 *****"),console.log(i()(t));var s={localId:[],serverId:[]};window.wx.chooseImage({success:function(t){if(console.log("***** 拍照、本地选图 ***** : ",t),s.localId=t.localIds,s.localId.length>4)alert("最多只能选择四张图片");else{var a=0,l=s.localId.length;!function t(){wx.uploadImage({localId:s.localId[a],isShowProgressTips:1,success:function(i){console.log("uploadImage -> 上传返回值: ",i),a++,s.serverId.push(i.serverId);var c=i.localData,r=window.__APPINFO__.host+"/home/tool/upload",d=new FormData;d.append("file",c),d.append("path","img"),d.append("ticket",o),d.append("openid",e),Object(n.c)(v,r,d,function(o){console.log("上传到服务器 -> 返回值 : ",o),0==o.data.code?(console.log("已上传："+a+"/"+l),v.img.push(o.data.result.url)):(console.log("第："+a+"/"+l+"上传失败"),v.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"}))}),a<l&&t()},fail:function(o){alert(i()(o))}})}()}}})}})}),window.wx.error(function(o){console.log("***** JS-SDK 注册失败 *****"),console.log(o)})}},openMedia:function(){if(console.log("*********************************"),console.log("获取摄像"),console.log("*********************************"),v.img.length>=1)console.log("最多上传1张");else{var o=d.a.cookie.get("ticket"),e=d.a.cookie.get("openid");window.wx.ready(function(){window.wx.checkJsApi({jsApiList:["getNetworkType","previewImage"],success:function(t){console.log("***** 判断当前版本是否支持指定 JS 接口，支持批量判断 *****"),console.log(i()(t));var s={localId:[],serverId:[]};window.wx.chooseImage({success:function(t){if(console.log("***** 拍照、本地选图 *****"),s.localId=t.localIds,s.localId.length>1)alert("最多只能选择1个视频");else{var a=0,l=s.localId.length;!function t(){wx.uploadImage({localId:s.localId[a],isShowProgressTips:1,success:function(i){console.log("uploadImage -> 上传返回值: ",i),a++,s.serverId.push(i.serverId);var c=i.localData,r=window.__APPINFO__.host+"/home/tool/upload",d=new FormData;d.append("file",c),d.append("path","vedio"),d.append("ticket",o),d.append("openid",e),Object(n.c)(v,r,d,function(o){console.log("上传到服务器 -> 返回值 : ",o),0==o.data.code?(console.log("已上传："+a+"/"+l),v.img.push(o.data.result.url)):(console.log("第："+a+"/"+l+"上传失败"),v.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"}))}),a<l&&t()},fail:function(o){alert(i()(o))}})}()}}})}})}),window.wx.error(function(o){console.log("***** JS-SDK 注册失败 *****"),console.log(o)})}},dataValidation:function(){var o={code:!0,msg:"成功"};return""==this.content?(o.code=!1,o.msg="举报内容不能为空",o):"获取地理信息失败"==this.wx_addr||"点击选择"==this.wx_addr?(o.code=!1,o.msg="请选择地理位置",o):0==this.img.length?(o.code=!1,o.msg="请上传图片",o):""==this.phone?(o.code=!1,o.msg="手机号不能为空",o):o},submit:function(){console.log("--------- 提交数据 ----------");var o=v.dataValidation();if(o.code){var e=d.a.cookie.get("ticket"),t=d.a.cookie.get("openid"),s=v.$route.query.el,i={img_list:this.img.join("|"),desc:this.content,video_list:this.video.join("|"),wx_addr:this.wx_addr,user_addr:this.user_addr,sex:this.sex,phone:this.phone,cname:s,openid:t,ticket:e},a=window.__APPINFO__.host+"/home/cms/add";Object(n.d)(v,a,i,function(o){console.log("表单提交  -> 返回值 : ",o),0==o.data.code?v.$router.push("/sucess"):v.$dialog.confirm({mes:o.data.msg,timeout:1500,icon:"success"})})}else v.$dialog.toast({mes:o.msg,timeout:1500,icon:"error"})},initAmap:function(){console.log("#####################"),console.log("初始化 高德地图  "),console.log("******** 由于Chrome、IOS10等已不再支持非安全域的浏览器定位请求，为保证定位成功率和精度，请尽快升级您的站点到HTTPS。******");var o=void 0,e=void 0;g=new l.a.Map("container",{resizeEnable:!0,zoom:16}),u=new l.a.Marker,g.add(u),g.on("click",function(t){o=t.lnglat.getLng(),e=t.lnglat.getLat(),v.setAddr(o,e)}),g.plugin(["AMap.ToolBar","AMap.MapType"],function(){g.addControl(new l.a.ToolBar),g.addControl(new l.a.MapType({showTraffic:!1,showRoad:!1}))}),v.initWehatMap()},setAddr:function(o,e){var t="";g.remove(u),u=new l.a.Marker({position:[o,e]}),g.add(u),l.a.service("AMap.Geocoder",function(){var s=new l.a.Geocoder({radius:1e3,extensions:"all"}),i=[o,e];s.getAddress(i,function(o,e){console.log("地址结果： status: ",o," result: ",e),"complete"===o&&"OK"===e.info?(t=e.regeocode.formattedAddress,v.wx_addr=e.regeocode.formattedAddress,r.a.loadUI(["misc/PoiPicker"],function(o){var s=new o({input:"searchInput",placeSearchOptions:{map:g,pageSize:4},searchResultsContainer:"searchResults"});s.on("poiPicked",function(o){s.hideSearchResults();var t=o.source,i=o.item;if("search"!==t)s.searchByKeyword(i.name);else{var n=e.regeocode.formattedAddress+"-"+i.name;console.log("poi: ",n),v.wx_addr=n}}),s.onCityReady(function(){s.searchByKeyword(t)})})):v.wx_addr="获取地理信息失败"})})},uploadFile:function(o){console.log("### uploadFile --\x3e : ",o);var e=this,t=void 0,s=d.a.cookie.get("ticket"),i=d.a.cookie.get("openid");if("img"==o){if(e.img.length>=4)return void e.$dialog.alert({mes:"最多上传四张"});t=e.$refs.imgFile.files[0]}if("video"==o){if(e.video.length>=1)return void e.$dialog.alert({mes:"最多上传一个视频"});t=e.$refs.videoFile.files[0]}console.log("input.file.files : ",t);var a=window.__APPINFO__.host+"/home/tool/upload",l=new FormData;l.append("file",t),l.append("path",o),l.append("ticket",s),l.append("openid",i),Object(n.c)(e,a,l,function(t){if(console.log("上传到服务器 -> 返回值 : ",t),0==t.data.code){var s=window.__APPINFO__.host+t.data.result.url;"img"==o&&e.img.push(s),"video"==o&&e.video.push(s),console.log("***** img: ",e.img),console.log("***** video: ",e.video)}else e.$dialog.toast({mes:"上传失败",timeout:1500,icon:"error"})})}}},m={render:function(){var o=this,e=o.$createElement,s=o._self._c||e;return s("div",{staticClass:"detail"},[s("div",{staticClass:"frm-list"},[s("yd-cell-group",{attrs:{title:""}},[s("yd-cell-item",[s("yd-textarea",{attrs:{slot:"right",placeholder:"举报内容:",maxlength:"200"},slot:"right",model:{value:o.content,callback:function(e){o.content=e},expression:"content"}})],1)],1)],1),o._v(" "),s("div",{staticClass:"frm-list"},[s("yd-cell-group",[s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[o._v("从地图中选择：")]),o._v(" "),s("span",{attrs:{slot:"right"},slot:"right"},[s("div",{staticClass:"frm-list-right",on:{click:function(e){o.showMap()}}},[s("img",{attrs:{src:t("EoJS"),alt:""}}),o._v(" "),s("div",{staticClass:"frm-addr-txt"},[o._v(o._s(o.wx_addr))])])])])],1)],1),o._v(" "),s("div",{staticClass:"frm-list"},[s("yd-cell-group",[s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[o._v("详细地址：")]),o._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:o.user_addr,expression:"user_addr"}],attrs:{slot:"right",type:"text",placeholder:""},domProps:{value:o.user_addr},on:{input:function(e){e.target.composing||(o.user_addr=e.target.value)}},slot:"right"})])],1)],1),o._v(" "),s("div",{staticClass:"frm-list bottom-line"},[s("div",{staticClass:"frm-list-head"},[s("div",{staticClass:"frm-list-head-l"},[o._v("\n        现场图片：\n      ")]),o._v(" "),s("div",{staticClass:"frm-list-head-r"},[o._v("\n        "+o._s(o.img.length)+"/4\n      ")])]),o._v(" "),s("div",{staticClass:"frm-list-img"},[s("div",{staticClass:"frm-list-img-l"},[s("input",{ref:"imgFile",staticClass:"input_file",attrs:{type:"file",name:"",value:""},on:{change:function(e){o.uploadFile("img")}}})]),o._v(" "),o._l(o.img,function(o){return s("div",{staticClass:"frm-list-img-l"},[s("img",{attrs:{src:o,alt:""}})])})],2)]),o._v(" "),s("div",{staticClass:"frm-list bottom-line"},[s("div",{staticClass:"frm-list-head"},[s("div",{staticClass:"frm-list-head-l"},[o._v("\n        现场视频：\n      ")]),o._v(" "),s("div",{staticClass:"frm-list-head-r"},[o._v("\n        "+o._s(o.video.length)+"/1\n      ")])]),o._v(" "),s("div",{staticClass:"frm-list-img"},[s("div",{staticClass:"frm-list-img-v"},[s("input",{ref:"videoFile",staticClass:"input_file",attrs:{type:"file",name:"",value:""},on:{change:function(e){o.uploadFile("video")}}})]),o._v(" "),o._l(o.video,function(o){return s("div",{staticClass:"frm-list-img-l"},[s("img",{attrs:{src:o,alt:""}})])})],2)]),o._v(" "),s("div",{staticClass:"frm-list"},[s("yd-cell-group",[s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[o._v("您的性别：")]),o._v(" "),s("div",{staticClass:"frm-list-rado",attrs:{slot:"right"},slot:"right"},[s("yd-radio-group",{model:{value:o.sex,callback:function(e){o.sex=e},expression:"sex"}},[s("yd-radio",{attrs:{val:"1"}},[o._v("男士")]),o._v(" "),s("yd-radio",{attrs:{val:"2"}},[o._v("女士")])],1)],1)])],1)],1),o._v(" "),s("div",{staticClass:"frm-list"},[s("yd-cell-group",{staticClass:"phoneNum"},[s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[o._v("手机号：")]),o._v(" "),s("yd-input",{attrs:{slot:"right",required:"","show-success-icon":!1,"show-error-icon":!1,regex:"mobile",placeholder:"请输入手机号码"},slot:"right",model:{value:o.phone,callback:function(e){o.phone=e},expression:"phone"}})],1)],1)],1),o._v(" "),s("div",{staticClass:"frm-btn",on:{click:function(e){o.submit()}}},[o._v("\n    提交线索\n  ")]),o._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:o.isShowMap,expression:"isShowMap"}],attrs:{id:"outer-box"}},[s("div",{staticClass:"goback",on:{click:function(e){o.hideMap()}}},[s("img",{attrs:{src:t("8718"),alt:""}}),o._v(" "),s("span",[o._v("确定")])]),o._v(" "),s("div",{attrs:{id:"container"}}),o._v(" "),o._m(0)])])},staticRenderFns:[function(){var o=this.$createElement,e=this._self._c||o;return e("div",{staticClass:"scrollbar1",attrs:{id:"panel"}},[e("div",{attrs:{id:"searchBar"}},[e("input",{attrs:{id:"searchInput",placeholder:"输入关键字搜素POI"}})]),this._v(" "),e("div",{attrs:{id:"searchResults"}})])}]};var f=t("VU/8")(p,m,!1,function(o){t("QGtn")},null,null);e.default=f.exports},EoJS:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABmFBMVEUAAAA9n/k1m/s3nPo9n/k9n/olk/gqlvorl/o6nvsgkfgfkfk9n/ogkfk8n/k8n/okkvk8n/k8n/kllPkkk/k7oPomlPk+nvswmfozmvg9n/k9n/k9n/o8n/ojkvk9n/klk/g9n/o9n/knlPg9n/o9nvo8n/kikvklkvoolfk2nfwwmfsumPk2nPw3nPxFpPo3nPkekPczm/kikfk0nPoTi/gplfkZj/g8n/ogkfg9nvo7n/oumP07n/o7nv01nPs9n/hNp/olk/cymvgvmPgajvc9n/kbjvc9n/k9n/o5nvo9n/s8oPk9nvoxmfolkvkjkvg9nvohkvkqlvnF4//D4v/h8f/f8P/d7//K5v/b7v/U6//S6v/H5P+/4P8+oPk8n/nj8//W7P/P6P/J5f+w2f7Z7f/O5/9Tq/qu2P6r1v6OyP1RqfqYzf2CwvxzuvtrtvtbrvpLpvnn9P/R6f/M5v+KxvyEw/x8v/x1u/tvuPtptftXrPpPqPpGpPmk0v2e0P2Uy/1hsvs3nfgsl/i02/6HxPx2vPt70GJzAAAAVHRSTlMA5SwS8sH+UEAmopaDg/fStnlyb2RgVzo2/u/t5+LSyr22squllpKQikUyIx4ZBunl493Z0cvEs398S0Y9Fw0C/PXy7+/v6t7XzcWrno2AfXVrXlw9sGHlAAACmUlEQVQ4y52UZ1/aUBTGbyAMZVOGe+9arXXv7r17b3ZCFkuGgHtrte3XblCKSQD7a59X55z7z0menJOA/9b9kKvf3/y55S9YyH9ysLe7+3P/eG7R2hhzdhVzSYogJILkzo6ef2vE3bvKURRLsbSqMAmGSMeG63OLpwKpMtv5Yip7XPhBJBkl1VyPc8SQhMiN0+ZQi8XheZbnkgkuNVLLrdk3tgRywx65Sa2zmwQkYWut+2HtgOMvndVC1y6FiIsuM/cgBlnIFFy3FYsIk7ScdZjAkSMKKULMoiv1nDOIyJv99GRIyMYfGt7WPgUT6UcmcCYtQzn9Vl+KHDKQVk/GDdz6pKDUdiQhz353GkDrE56GpmecO2cgnyiMGsCJSSEJIXOocz0Wg0nIc6aOYCYuQ7itirfXT2coBGn6ZLzWNUTaZL5W1nJ2k1QhlONm154jDYSISJf6Q05nxNO6l1CQluddNZNBLNJIhs0Us9nUgSDRWkrLKUe9WWtCNCmrvEKxqJxIuWlglrW8PbAsnt5RrwOB5C9X6u6jZlMnxG1X9tHs55TjkI7bIYrzoK5cx5RyS/LSLz9oIP8BpVYbErmpCdBILy620B8ubm+64zdxFSfQNSfzsQi4Qw6RTqCyYabkacRMLLv7xsCnEssitEMWyp9ANGw1U03B7nYcx6IAzB+SNJQyU+XqgrfN527RT6VXfDmwtHaTvNqTpDP7Tav16BAmvq5us+WxL6pbj6dxrnVUd7N3YrgSijag10ope89QcIuVADeC4GO/Mf/grQSrOL4EGsryRlyumhn0dtiCdQYxHu7DvL36g1W3rbMN6+4dGHQHAsFgILAwNNBn62zHbEMWYFZTeNDm6+zA2vE2HOvAfN3vv4yBf9dvc1e1EXdyZT8AAAAASUVORK5CYII="},QGtn:function(o,e){}});
//# sourceMappingURL=1.a832a7963e3e37d0a244.js.map